resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
lm2 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type + random_sweep + require_check + random_check + prohibit_phone + security_camera, data = sub, x = T, y = T)
lm2.1 = robcov(lm2)
lrtest(lm2.1, lm1.2)
lm3 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type+ random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + disciplinary_process + parent_training_assist + parenthelp_drug, data = sub, x = T, y = T)
lm3.1 = robcov(lm3)
lrtest(lm2.1, lm3.1)
lm4 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +  school_type + random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + socialshelp_drug + juvhelp_drug + lawhelp_drug + mhhelp_drug + civichelp_drug + privatehelp_drug + relighelp_drug, data = sub, x = T, y = T)
lm4.1 = robcov(lm4)
lrtest(lm4.1, lm3.1)
lm5 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  prohibit_phone + security_camera + open_house + parent_teacher_conf + mhhelp_drug  + privatehelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community, data = sub, x = T, y = T)
lm5.1 = robcov(lm5)
lrtest(lm5.1, lm4.1)
library(stargazer)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type = 'text')
lm1 = lm(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_area_recode + crime_live_recode + as.factor(school_type), sub)
summary(lm1)
library(lmtest)
resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
lm2 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type + random_sweep + require_check + random_check + prohibit_phone + security_camera, data = sub, x = T, y = T)
lm2.1 = robcov(lm2)
lrtest(lm2.1, lm1.2)
lm3 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type+ random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + disciplinary_process + parent_training_assist + parenthelp_drug, data = sub, x = T, y = T)
lm3.1 = robcov(lm3)
lrtest(lm2.1, lm3.1)
lm4 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +  school_type + random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + socialshelp_drug + juvhelp_drug + lawhelp_drug + mhhelp_drug + civichelp_drug + privatehelp_drug + relighelp_drug, data = sub, x = T, y = T)
lm4.1 = robcov(lm4)
lrtest(lm4.1, lm3.1)
lm5 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community, data = sub, x = T, y = T)
lm5.1 = robcov(lm5)
lrtest(lm5.1, lm4.1)
library(stargazer)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type = 'text')
lm1 = lm(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_area_recode + crime_live_recode + as.factor(school_type), sub)
summary(lm1)
library(lmtest)
resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
lm2 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type + random_sweep + require_check + random_check + prohibit_phone + security_camera, data = sub, x = T, y = T)
lm2.1 = robcov(lm2)
lrtest(lm2.1, lm1.2)
lm3 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type+ random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + disciplinary_process + parent_training_assist + parenthelp_drug, data = sub, x = T, y = T)
lm3.1 = robcov(lm3)
lrtest(lm2.1, lm3.1)
lm4 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +  school_type + random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + socialshelp_drug + juvhelp_drug + lawhelp_drug + mhhelp_drug + civichelp_drug + privatehelp_drug + relighelp_drug, data = sub, x = T, y = T)
lm4.1 = robcov(lm4)
lrtest(lm4.1, lm3.1)
lm5 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + require_check + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community, data = sub, x = T, y = T)
lm5.1 = robcov(lm5)
lrtest(lm5.1, lm4.1)
library(stargazer)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type = 'text')
lm1 = lm(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_area_recode + crime_live_recode + as.factor(school_type), sub)
summary(lm1)
library(lmtest)
resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
lm2 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type + random_sweep + require_check + random_check + prohibit_phone + security_camera, data = sub, x = T, y = T)
lm2.1 = robcov(lm2)
lrtest(lm2.1, lm1.2)
lm3 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type+ random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + disciplinary_process + parent_training_assist + parenthelp_drug, data = sub, x = T, y = T)
lm3.1 = robcov(lm3)
lrtest(lm2.1, lm3.1)
lm4 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +  school_type + random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + socialshelp_drug + juvhelp_drug + lawhelp_drug + mhhelp_drug + civichelp_drug + privatehelp_drug + relighelp_drug, data = sub, x = T, y = T)
lm4.1 = robcov(lm4)
lrtest(lm4.1, lm3.1)
lm5 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community, data = sub, x = T, y = T)
lm5.1 = robcov(lm5)
lrtest(lm5.1, lm4.1)
library(stargazer)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type = 'text')
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentacadnotimptlog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm6.1
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm6.1
lm1 = lm(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_area_recode + crime_live_recode + as.factor(school_type), sub)
summary(lm1)
library(lmtest)
resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
lm2 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type + random_sweep + require_check + random_check + prohibit_phone + security_camera, data = sub, x = T, y = T)
lm2.1 = robcov(lm2)
lrtest(lm2.1, lm1.2)
lm3 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type+ random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + disciplinary_process + parent_training_assist + parenthelp_drug, data = sub, x = T, y = T)
lm3.1 = robcov(lm3)
lrtest(lm2.1, lm3.1)
lm4 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +  school_type + random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + socialshelp_drug + juvhelp_drug + lawhelp_drug + mhhelp_drug + civichelp_drug + privatehelp_drug + relighelp_drug, data = sub, x = T, y = T)
lm4.1 = robcov(lm4)
lrtest(lm4.1, lm3.1)
lm5 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + juvhelp_drug+ relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community, data = sub, x = T, y = T)
lm5.1 = robcov(lm5)
lrtest(lm5.1, lm4.1)
library(stargazer)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type = 'text')
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm7.1
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm7.1
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
lm8.1
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
lm8.1
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
lm8.1
stargazer(lm6.1, lm7.1, lm8.1)
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
lm8.1
stargazer(lm6.1, lm7.1, lm8.1, type = 'text')
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
stargazer(lm6.1, lm7.1, lm8.1, type = 'text')
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug+ mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug + mhhelp_drug + relighelp_drug + behav_mod + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
stargazer(lm6.1, lm7.1, lm8.1, type = 'text')
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug+ mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug+ mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug + mhhelp_drug + relighelp_drug + behav_mod + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
stargazer(lm6.1, lm7.1, lm8.1, type = 'text')
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug+ mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug+ mhhelp_drug + relighelp_drug + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug + mhhelp_drug + relighelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
lmfinal = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug + mhhelp_drug + relighelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentlowgradeslog1p*random_sweep, data = sub, x = T, y = T)
stargazer(lm6.1, lm7.1, lm8.1, lmfinal, type = 'text')
sub = read.csv('preprocessedstudy1.csv')
colnames(sub)
glimpse(sub)
knitr::opts_chunk$set(echo = TRUE)
sub = read.csv('preprocessedstudy1.csv')
colnames(sub)
glimpse(sub)
knitr::opts_chunk$set(echo = TRUE)
load("my_work_space.RData")
sub = read.csv('preprocessedstudy1.csv')
colnames(sub)
library(tibble)
glimpse(sub)
lm1 = lm(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_area_recode + crime_live_recode + as.factor(school_type), sub)
summary(lm1)
library(lmtest)
resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
lm2 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type + random_sweep + require_check + random_check + prohibit_phone + security_camera, data = sub, x = T, y = T)
lm2.1 = robcov(lm2)
lrtest(lm2.1, lm1.2)
lm3 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type+ random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + disciplinary_process + parent_training_assist + parenthelp_drug, data = sub, x = T, y = T)
lm3.1 = robcov(lm3)
lrtest(lm2.1, lm3.1)
lm4 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +  school_type + random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + socialshelp_drug + juvhelp_drug + lawhelp_drug + mhhelp_drug + civichelp_drug + privatehelp_drug + relighelp_drug, data = sub, x = T, y = T)
lm4.1 = robcov(lm4)
lrtest(lm4.1, lm3.1)
lm5 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + juvhelp_drug+ relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community, data = sub, x = T, y = T)
lm5.1 = robcov(lm5)
lrtest(lm5.1, lm4.1)
library(stargazer)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type = 'text')
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug+ mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug+ mhhelp_drug + relighelp_drug + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug + mhhelp_drug + relighelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
lmfinal = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug + mhhelp_drug + relighelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentlowgradeslog1p*random_sweep, data = sub, x = T, y = T)
stargazer(lm6.1, lm7.1, lm8.1, lmfinal, type = 'text')
knit_with_parameters('~/Documents/GitHub/MA-Thesis/InitialResults_KagenLim_Thesis.Rmd')
stargazer(lm6.1, lm7.1, lm8.1, lmfinal, type = 'text') %>%
kableExtra::landscape()
library(stargazer)
library(kableExtra)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type = 'text') %>%
kableExtra::landscape()
library(stargazer)
library(kableExtra)
landscape(stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type = 'text'))
library(stargazer)
library(kableExtra)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type = 'text')
stargazer(lm6.1, lm7.1, lm8.1, lmfinal)
library(stargazer)
library(kableExtra)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1)
stargazer(lm6.1, lm7.1, lm8.1, lmfinal, type='text')
library(stargazer)
library(kableExtra)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type='text')
stargazer(lm6.1, lm7.1, lm8.1, lmfinal, type='html')
library(stargazer)
library(kableExtra)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, type='html')
stargazer(lm6.1, lm7.1, lm8.1, lmfinal, header = F, type='latex')
library(stargazer)
library(kableExtra)
stargazer(lm1.2, lm2.1, lm3.1, lm4.1, lm5.1, header = FALSE, type = 'text')
stargazer(lm6.1, lm7.1, lm8.1, lmfinal, header = FALSE, type = 'text')
summary(lm1.2)
print(lm1.2)
lm1 = lm(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_area_recode + crime_live_recode + as.factor(school_type), sub)
library(lmtest)
resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
lm1 = lm(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_area_recode + crime_live_recode + as.factor(school_type), sub)
library(lmtest)
resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
print(lm.2)
lm1 = lm(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_area_recode + crime_live_recode + as.factor(school_type), sub)
library(lmtest)
resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
print(lm1.2)
lm2 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type + random_sweep + require_check + random_check + prohibit_phone + security_camera, data = sub, x = T, y = T)
lm2.1 = robcov(lm2)
lrtest(lm2.1, lm1.2)
print(lm2.1)
lm3 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type+ random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + disciplinary_process + parent_training_assist + parenthelp_drug, data = sub, x = T, y = T)
lm3.1 = robcov(lm3)
lrtest(lm2.1, lm3.1)
print(lm3.1)
lm4 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +  school_type + random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + socialshelp_drug + juvhelp_drug + lawhelp_drug + mhhelp_drug + civichelp_drug + privatehelp_drug + relighelp_drug, data = sub, x = T, y = T)
lm4.1 = robcov(lm4)
lrtest(lm4.1, lm3.1)
print(lm4.1)
lm5 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + juvhelp_drug+ relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community, data = sub, x = T, y = T)
lm5.1 = robcov(lm5)
lrtest(lm5.1, lm4.1)
#likelihood ratio test
print(lm5.1)
lm1 = lm(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_area_recode + crime_live_recode + as.factor(school_type), sub)
library(lmtest)
resettest(lm1, power = 3)
bptest(lm1)
library(rms)
sub$school_type <- factor(sub$school_type)
lm1.1 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode, data = sub, x = T, y = T)
lm1.2 = robcov(lm1.1)
print(lm1.2)
lm2 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type + random_sweep + require_check + random_check + prohibit_phone + security_camera, data = sub, x = T, y = T)
lm2.1 = robcov(lm2)
lrtest(lm2.1, lm1.2)
print(lm2.1)
lm3 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type+ random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + disciplinary_process + parent_training_assist + parenthelp_drug, data = sub, x = T, y = T)
lm3.1 = robcov(lm3)
lrtest(lm2.1, lm3.1)
print(lm3.1)
lm4 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +  school_type + random_sweep + prohibit_phone + security_camera + open_house + parent_teacher_conf + socialshelp_drug + juvhelp_drug + lawhelp_drug + mhhelp_drug + civichelp_drug + privatehelp_drug + relighelp_drug, data = sub, x = T, y = T)
lm4.1 = robcov(lm4)
lrtest(lm4.1, lm3.1)
print(lm4.1)
lm5 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + mhhelp_drug + juvhelp_drug+ relighelp_drug + prevention_curriculum + sel + behav_mod + mentoring + peer_mediation + student_court + restorative_circles + promote_community, data = sub, x = T, y = T)
lm5.1 = robcov(lm5)
lrtest(lm5.1, lm4.1)
#likelihood ratio test
print(lm5.1)
lm6 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug+ mhhelp_drug + relighelp_drug + behav_mod + percentlowgradeslog1p*open_house + percentacadnotimptlog1p*open_house + percentlowgradeslog1p*parent_teacher_conf + percentacadnotimptlog1p*parent_teacher_conf, data = sub, x = T, y = T)
lm6.1 = robcov(lm6)
print(lm6.1)
lm7 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode +school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug+ mhhelp_drug + relighelp_drug + percentlowgradeslog1p*juvhelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*mhhelp_drug + percentlowgradeslog1p*relighelp_drug + percentacadnotimptlog1p*relighelp_drug, data = sub, x = T, y = T)
lm7.1 = robcov(lm7)
print(lm7.1)
lm8 = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug + mhhelp_drug + relighelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentacadnotimptlog1p*random_sweep + percentlowgradeslog1p*random_sweep + percentacadnotimptlog1p*prohibit_phone + percentlowgradeslog1p*prohibit_phone, data = sub, x = T, y = T)
lm8.1 = robcov(lm8)
print(lm8.1)
lmfinal = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug + mhhelp_drug + relighelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentlowgradeslog1p*random_sweep, data = sub, x = T, y = T)
print(lmfinal)
stargazer(lm6.1, lm7.1, lm8.1, lmfinal, header = FALSE, type = 'text')
lmfinal = ols(total_incidentslog1p ~ percentlowgradeslog1p + percentacadnotimptlog1p + school_size + urban + crime_live_recode + crime_area_recode + school_type +  random_sweep + prohibit_phone + open_house + parent_teacher_conf + juvhelp_drug + mhhelp_drug + relighelp_drug + percentacadnotimptlog1p*juvhelp_drug + percentlowgradeslog1p*mhhelp_drug + percentlowgradeslog1p*random_sweep, data = sub, x = T, y = T)
print(lmfinal)
knitr::opts_chunk$set(echo = TRUE)
#setting up my dataset#
library(haven)
library(psych)
library(tibble)
library(dplyr)
df <- read_sav("pu_ssocs18.sav") #2017-2018 School Survey on Crime and Safety Dataset; find the hyperlink above#
#update#
basic_model <- df[, c("INCID18", "C0532", "C0534", "C0536")]
colnames(basic_model) <- c("total_incidents", "percentlowgrades", "percentgocollege", "percentacadimpt")
basic_model <- na.omit(basic_model) #making sure that no NA values remain#
checkzero_total_incidents <- basic_model$total_incidents == 0
table(checkzero_total_incidents) #there are 274 schools with zero incidents, out of all 2762 schools#
checkzero_percentlowgrades <- basic_model$percentlowgrades == 0
table(checkzero_percentlowgrades)#there are 128 schools with 0% low grades, out of all 2762 schools#
checkzero_percentgocollege <- basic_model$percentgocollege== 0
table(checkzero_percentgocollege)
checkzero_percentacadimpt <- basic_model$percentacadimpt== 0
table(checkzero_percentgocollege)
#These are all non-zero numbers, so log1p transformation will be necessary#
basic_model$percentnogocollege = 100 - basic_model$percentgocollege #reverse-recoding percentgocollege as percent no go college#
describe(basic_model$percentgocollege) #checking recoding#
describe(basic_model$percentnogocollege) #checking recoding#
basic_model$percentacadnotimpt = 100 - basic_model$percentacadimpt #reverse-recoding percent acadnotimpt as percentacadimpt#
describe(basic_model$percentacadimpt) #checking recoding#
describe(basic_model$percentacadnotimpt) #checking recoding#
cor(basic_model, method = "pearson") #checking correlations9
cor.test(basic_model$percentnogocollege, basic_model$percentacadnotimpt, method = "pearson")
cor.test(basic_model$percentlowgrades, basic_model$percentacadnotimpt, method = "pearson")
cor.test(basic_model$percentnogocollege, basic_model$percentlowgrades, method = "pearson")
basic_model$total_incidentslog1p = log1p(basic_model$total_incidents)
basic_model$percentlowgradeslog1p = log1p(basic_model$percentlowgrades)
basic_model$percentnogocollegelog1p = log1p(basic_model$percentnogocollege)
basic_model$percentacadnotimptlog1p = log1p(basic_model$percentacadnotimpt)
basic_model = select(basic_model, -c(total_incidents, percentgocollege,percentnogocollege, percentacadimpt, percentacadnotimpt, percentlowgrades))
#percentnogocollegelog1p and percentacadnotimptlog1p are highly correlated, so one of them needs to be dropped. I will drop percentnogocollegelog1p.#
basic_model = select(basic_model, -c(percentnogocollegelog1p))
glimpse(basic_model)
#setting up my dataset#
#Nickerson and Martens (2008) reocde procedure - combine mixed into moderate, and combined school into middle school#
#This seems sensible to me too#
demographic_control <- df[, c("FR_SIZE", "STRATA", "FR_URBAN", "C0560", "C0562")]
colnames(demographic_control) <- c("school_size", "demographics", "urban", "crime_live", "crime_area")
demographic_control <- na.omit(demographic_control) #making sure that no NA values remain#
demographic_control$crime_live = ifelse(demographic_control$crime_live == 4, 2, demographic_control$crime_live)
demographic_control$crime_live_recode = 4 - demographic_control$crime_live #reverse-recoding crimelive#
table(demographic_control$crime_live) #checking recoding#
table(demographic_control$crime_live_recode) #checking recoding#
demographic_control$crime_area_recode = 4 - demographic_control$crime_area #reverse-recoding crimearea#
table(demographic_control$crime_area) #checking recoding#
table(demographic_control$crime_area_recode) #checking recoding#
#School Size needs no recoding
table(demographic_control$school_size)
(demographic_control <- demographic_control %>%
mutate(school_type = case_when(
demographics <= 143 ~ "Elementary",
demographics >= 211 & demographics<=244 | demographics>=413 & demographics<=444 ~  "Middle_Combined",
demographics>=311 & demographics<=344 ~ "High"
)))
table(demographic_control$school_type)
#Rural or Urban (City, Suburb or Town)
demographic_control$urban = ifelse(demographic_control$urban == 4, 0, 1)
table(demographic_control$urban)
demographic_control = select(demographic_control, -c(demographics, crime_live, crime_area))
glimpse(demographic_control)
(demographic_control <- demographic_control %>%
mutate(school_type = case_when(
demographics <= 143 ~ "Elementary",
demographics >= 211 & demographics<=244 | demographics>=413 & demographics<=444 ~  "Middle_Combined",
demographics>=311 & demographics<=344 ~ "High"
)))
#setting up my dataset#
#Nickerson and Martens (2008) reocde procedure - combine mixed into moderate, and combined school into middle school#
#This seems sensible to me too#
demographic_control <- df[, c("FR_SIZE", "STRATA", "FR_URBAN", "C0560", "C0562")]
colnames(demographic_control) <- c("school_size", "demographics", "urban", "crime_live", "crime_area")
demographic_control <- na.omit(demographic_control) #making sure that no NA values remain#
demographic_control$crime_live = ifelse(demographic_control$crime_live == 4, 2, demographic_control$crime_live)
demographic_control$crime_live_recode = 4 - demographic_control$crime_live #reverse-recoding crimelive#
table(demographic_control$crime_live) #checking recoding#
table(demographic_control$crime_live_recode) #checking recoding#
demographic_control$crime_area_recode = 4 - demographic_control$crime_area #reverse-recoding crimearea#
table(demographic_control$crime_area) #checking recoding#
table(demographic_control$crime_area_recode) #checking recoding#
#School Size needs no recoding
table(demographic_control$school_size)
(demographic_control <- demographic_control %>%
mutate(school_type = case_when(
demographics <= 143 ~ "Elementary",
demographics >= 211 & demographics<=244 | demographics>=413 & demographics<=444 ~  "Middle_Combined",
demographics>=311 & demographics<=344 ~ "High"
)))
table(demographic_control$school_type)
#Rural or Urban (City, Suburb or Town)
demographic_control$urban = ifelse(demographic_control$urban == 4, 0, 1)
table(demographic_control$urban)
demographic_control = select(demographic_control, -c(demographics, crime_live, crime_area))
glimpse(demographic_control)
#School Size needs no recoding
table(demographic_control$school_size)
table(demographic_control$school_type)
knitr::opts_chunk$set(echo = TRUE)
sub = read.csv('preprocessedstudy1_2a.csv')
colnames(sub)
glimpse(sub)
table(sub$open_house)
table(sub$parent_teacher_conf)
table(sub$urban)
table(sub$school_size)
#setting up my dataset#
#Nickerson and Martens (2008) reocde procedure - combine mixed into moderate, and combined school into middle school#
#This seems sensible to me too#
demographic_control <- df[, c("FR_SIZE", "STRATA", "FR_URBAN", "C0560", "C0562")]
colnames(demographic_control) <- c("school_size", "demographics", "urban", "crime_live", "crime_area")
demographic_control <- na.omit(demographic_control) #making sure that no NA values remain#
demographic_control$crime_live = ifelse(demographic_control$crime_live == 4, 2, demographic_control$crime_live)
demographic_control$crime_live_recode = 4 - demographic_control$crime_live #reverse-recoding crimelive#
table(demographic_control$crime_live) #checking recoding#
table(demographic_control$crime_live_recode) #checking recoding#
demographic_control$crime_area_recode = 4 - demographic_control$crime_area #reverse-recoding crimearea#
table(demographic_control$crime_area) #checking recoding#
table(demographic_control$crime_area_recode) #checking recoding#
#School Size needs no recoding
table(demographic_control$school_size)
(demographic_control <- demographic_control %>%
mutate(school_type = case_when(
demographics <= 143 ~ "Elementary",
demographics >= 211 & demographics<=244 | demographics>=413 & demographics<=444 ~  "Middle_Combined",
demographics>=311 & demographics<=344 ~ "High"
)))
table(demographic_control$school_type)
#Rural or Urban (City, Suburb or Town)
demographic_control$urban = ifelse(demographic_control$urban == 4, 0, 1)
table(demographic_control$urban)
demographic_control = select(demographic_control, -c(demographics, crime_live, crime_area))
glimpse(demographic_control)
table(demographic_control$school_type)
table(demographic_control$school_size)
#setting up my dataset#
#Nickerson and Martens (2008) reocde procedure - combine mixed into moderate, and combined school into middle school#
#This seems sensible to me too#
demographic_control <- df[, c("FR_SIZE", "STRATA", "FR_URBAN", "C0560", "C0562")]
colnames(demographic_control) <- c("school_size", "demographics", "urban", "crime_live", "crime_area")
demographic_control <- na.omit(demographic_control) #making sure that no NA values remain#
demographic_control$crime_live = ifelse(demographic_control$crime_live == 4, 2, demographic_control$crime_live)
demographic_control$crime_live_recode = 4 - demographic_control$crime_live #reverse-recoding crimelive#
table(demographic_control$crime_live) #checking recoding#
table(demographic_control$crime_live_recode) #checking recoding#
demographic_control$crime_area_recode = 4 - demographic_control$crime_area #reverse-recoding crimearea#
table(demographic_control$crime_area) #checking recoding#
table(demographic_control$crime_area_recode) #checking recoding#
#School Size needs no recoding
table(demographic_control$school_size)
(demographic_control <- demographic_control %>%
mutate(school_type = case_when(
demographics <= 143 ~ "Elementary",
demographics >= 211 & demographics<=244 | demographics>=413 & demographics<=444 ~  "Middle_Combined",
demographics>=311 & demographics<=344 ~ "High"
)))
table(demographic_control$school_type)
#Rural or Urban (City, Suburb or Town)
demographic_control$urban = ifelse(demographic_control$urban == 4, 0, 1)
table(demographic_control$urban)
demographic_control = select(demographic_control, -c(demographics, crime_live, crime_area))
glimpse(demographic_control)
